{"version":3,"sources":["offset.js"],"names":[],"mappings":"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","file":"offset-compiled.js","sourcesContent":["import zeroFill from '../utils/zero-fill';\nimport { createDuration } from '../duration/create';\nimport { addSubtract } from '../moment/add-subtract';\nimport { isMoment, copyConfig } from '../moment/constructor';\nimport { addFormatToken } from '../format/format';\nimport { addRegexToken, matchOffset } from '../parse/regex';\nimport { addParseToken } from '../parse/token';\nimport { createLocal } from '../create/local';\nimport { prepareConfig } from '../create/from-anything';\nimport { createUTC } from '../create/utc';\nimport isDate from '../utils/is-date';\nimport toInt from '../utils/to-int';\nimport compareArrays from '../utils/compare-arrays';\nimport { hooks } from '../utils/hooks';\n\n// FORMATTING\n\nfunction offset (token, separator) {\n    addFormatToken(token, 0, 0, function () {\n        var offset = this.utcOffset();\n        var sign = '+';\n        if (offset < 0) {\n            offset = -offset;\n            sign = '-';\n        }\n        return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~(offset) % 60, 2);\n    });\n}\n\noffset('Z', ':');\noffset('ZZ', '');\n\n// PARSING\n\naddRegexToken('Z',  matchOffset);\naddRegexToken('ZZ', matchOffset);\naddParseToken(['Z', 'ZZ'], function (input, array, config) {\n    config._useUTC = true;\n    config._tzm = offsetFromString(input);\n});\n\n// HELPERS\n\n// timezone chunker\n// '+10:00' > ['10',  '00']\n// '-1530'  > ['-15', '30']\nvar chunkOffset = /([\\+\\-]|\\d\\d)/gi;\n\nfunction offsetFromString(string) {\n    var matches = ((string || '').match(matchOffset) || []);\n    var chunk   = matches[matches.length - 1] || [];\n    var parts   = (chunk + '').match(chunkOffset) || ['-', 0, 0];\n    var minutes = +(parts[1] * 60) + toInt(parts[2]);\n\n    return parts[0] === '+' ? minutes : -minutes;\n}\n\n// Return a moment from input, that is local/utc/zone equivalent to model.\nexport function cloneWithOffset(input, model) {\n    var res, diff;\n    if (model._isUTC) {\n        res = model.clone();\n        diff = (isMoment(input) || isDate(input) ? +input : +createLocal(input)) - (+res);\n        // Use low-level api, because this fn is low-level api.\n        res._d.setTime(+res._d + diff);\n        hooks.updateOffset(res, false);\n        return res;\n    } else {\n        return createLocal(input).local();\n    }\n}\n\nfunction getDateOffset (m) {\n    // On Firefox.24 Date#getTimezoneOffset returns a floating point.\n    // https://github.com/moment/moment/pull/1871\n    return -Math.round(m._d.getTimezoneOffset() / 15) * 15;\n}\n\n// HOOKS\n\n// This function will be called whenever a moment is mutated.\n// It is intended to keep the offset in sync with the timezone.\nhooks.updateOffset = function () {};\n\n// MOMENTS\n\n// keepLocalTime = true means only change the timezone, without\n// affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\n// 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\n// +0200, so we adjust the time as needed, to be valid.\n//\n// Keeping the time actually adds/subtracts (one hour)\n// from the actual represented time. That is why we call updateOffset\n// a second time. In case it wants us to change the offset again\n// _changeInProgress == true case, then we have to adjust, because\n// there is no such time in the given timezone.\nexport function getSetOffset (input, keepLocalTime) {\n    var offset = this._offset || 0,\n        localAdjust;\n    if (input != null) {\n        if (typeof input === 'string') {\n            input = offsetFromString(input);\n        }\n        if (Math.abs(input) < 16) {\n            input = input * 60;\n        }\n        if (!this._isUTC && keepLocalTime) {\n            localAdjust = getDateOffset(this);\n        }\n        this._offset = input;\n        this._isUTC = true;\n        if (localAdjust != null) {\n            this.add(localAdjust, 'm');\n        }\n        if (offset !== input) {\n            if (!keepLocalTime || this._changeInProgress) {\n                addSubtract(this, createDuration(input - offset, 'm'), 1, false);\n            } else if (!this._changeInProgress) {\n                this._changeInProgress = true;\n                hooks.updateOffset(this, true);\n                this._changeInProgress = null;\n            }\n        }\n        return this;\n    } else {\n        return this._isUTC ? offset : getDateOffset(this);\n    }\n}\n\nexport function getSetZone (input, keepLocalTime) {\n    if (input != null) {\n        if (typeof input !== 'string') {\n            input = -input;\n        }\n\n        this.utcOffset(input, keepLocalTime);\n\n        return this;\n    } else {\n        return -this.utcOffset();\n    }\n}\n\nexport function setOffsetToUTC (keepLocalTime) {\n    return this.utcOffset(0, keepLocalTime);\n}\n\nexport function setOffsetToLocal (keepLocalTime) {\n    if (this._isUTC) {\n        this.utcOffset(0, keepLocalTime);\n        this._isUTC = false;\n\n        if (keepLocalTime) {\n            this.subtract(getDateOffset(this), 'm');\n        }\n    }\n    return this;\n}\n\nexport function setOffsetToParsedOffset () {\n    if (this._tzm) {\n        this.utcOffset(this._tzm);\n    } else if (typeof this._i === 'string') {\n        this.utcOffset(offsetFromString(this._i));\n    }\n    return this;\n}\n\nexport function hasAlignedHourOffset (input) {\n    input = input ? createLocal(input).utcOffset() : 0;\n\n    return (this.utcOffset() - input) % 60 === 0;\n}\n\nexport function isDaylightSavingTime () {\n    return (\n        this.utcOffset() > this.clone().month(0).utcOffset() ||\n        this.utcOffset() > this.clone().month(5).utcOffset()\n    );\n}\n\nexport function isDaylightSavingTimeShifted () {\n    if (typeof this._isDSTShifted !== 'undefined') {\n        return this._isDSTShifted;\n    }\n\n    var c = {};\n\n    copyConfig(c, this);\n    c = prepareConfig(c);\n\n    if (c._a) {\n        var other = c._isUTC ? createUTC(c._a) : createLocal(c._a);\n        this._isDSTShifted = this.isValid() &&\n            compareArrays(c._a, other.toArray()) > 0;\n    } else {\n        this._isDSTShifted = false;\n    }\n\n    return this._isDSTShifted;\n}\n\nexport function isLocal () {\n    return !this._isUTC;\n}\n\nexport function isUtcOffset () {\n    return this._isUTC;\n}\n\nexport function isUtc () {\n    return this._isUTC && this._offset === 0;\n}\n"]}